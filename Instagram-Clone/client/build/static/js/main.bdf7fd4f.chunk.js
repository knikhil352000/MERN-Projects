(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{51:function(e,t,a){},52:function(e,t,a){},60:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(5),c=a(2),s=a(17),o=a.n(s),r=a(14),i=(a(51),a(90)),l=(a(52),a(26)),u=l.a.initializeApp({apiKey:"AIzaSyBDLNk87oVh-UkOUxE5BDak8D_r1H1EzFg",authDomain:"instagram-clone-998b0.firebaseapp.com",projectId:"instagram-clone-998b0",storageBucket:"instagram-clone-998b0.appspot.com",messagingSenderId:"143755547531",appId:"1:143755547531:web:268dd4656e2f838f4b958e"}).firestore(),p=l.a.auth(),j=l.a.storage(),d=function(e){var t=e.imageUrl,a=e.caption,s=e.username,o=e.postId,l=e.user,p=Object(c.useState)([]),j=Object(r.a)(p,2),d=j[0],m=j[1],b=Object(c.useState)(""),g=Object(r.a)(b,2),h=g[0],O=g[1];Object(c.useEffect)((function(){var e;return o&&(e=u.collection("posts").doc(o).collection("comments").onSnapshot((function(e){m(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[o]);return Object(n.jsxs)("div",{className:"post",children:[Object(n.jsxs)("div",{className:"post__header",children:[Object(n.jsx)(i.a,{className:"post__avatar",alt:s,src:"/static/images/avatar/1.jpg"}),Object(n.jsx)("h3",{children:s})]}),Object(n.jsx)("img",{className:"post__image",src:t,alt:""}),Object(n.jsxs)("h4",{className:"post__text",children:[Object(n.jsx)("strong",{children:s})," ",a]}),Object(n.jsx)("div",{className:"post__comments",children:d.map((function(e){return Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:e.username})," ",e.text]})}))}),Object(n.jsxs)("form",{className:"post__commentBox",children:[Object(n.jsx)("input",{className:"post__input",type:"text",placeholder:"Add a comment...",value:h,onChange:function(e){return O(e.target.value)}}),Object(n.jsx)("button",{disabled:!h,className:"post__button",type:"submit",onClick:function(e){e.preventDefault(),u.collection("posts").doc(o).collection("comments").add({text:h,username:l.displayName}),O("")},children:"Post"})]})]})},m=a(86),b=a(87),g=a(89),h=a(88),O=(a(60),function(e){var t=e.username,a=Object(c.useState)(""),s=Object(r.a)(a,2),o=s[0],i=s[1],p=Object(c.useState)(0),d=Object(r.a)(p,2),m=d[0],b=d[1],O=Object(c.useState)(""),f=Object(r.a)(O,2),x=f[0],v=f[1],_=Object(c.useState)(""),N=Object(r.a)(_,2),w=(N[0],N[1]);return Object(n.jsxs)("div",{className:"imageUpload",children:[Object(n.jsx)("progress",{className:"imageUpload__progress",value:m,max:"100"}),Object(n.jsx)(g.a,{onChange:function(e){return i(e.target.value)},type:"text",placeholder:"Enter a caption...",value:o}),Object(n.jsx)(g.a,{type:"file",onChange:function(e){e.target.files[0]&&v(e.target.files[0])}}),Object(n.jsx)(h.a,{onClick:function(){j.ref("images/".concat(x.name)).put(x).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);b(t)}),(function(e){alert(e.message)}),(function(){j.ref("images").child(x.name).getDownloadURL().then((function(e){w(e),u.collection("posts").add({imageUrl:e,caption:o,timestamp:l.a.firestore.FieldValue.serverTimestamp(),username:t}),b(0),i(""),v(null)}))}))},children:"Upload"})]})});a(61);function f(){return{height:"300px",top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var x=Object(m.a)((function(e){return{paper:{position:"absolute",width:400,height:200,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),v=function(){var e=x(),t=Object(c.useState)([]),a=Object(r.a)(t,2),s=a[0],o=a[1],i=Object(c.useState)(!0),l=Object(r.a)(i,2),j=l[0],m=l[1],v=Object(c.useState)(""),_=Object(r.a)(v,2),N=_[0],w=_[1],S=Object(c.useState)(""),y=Object(r.a)(S,2),C=y[0],k=y[1],I=Object(c.useState)(!1),U=Object(r.a)(I,2),E=U[0],D=U[1],A=Object(c.useState)(""),B=Object(r.a)(A,2),L=B[0],P=B[1],z=Object(c.useState)(f),F=Object(r.a)(z,1)[0],J=Object(c.useState)(null),T=Object(r.a)(J,2),V=T[0],W=T[1];Object(c.useEffect)((function(){var e=p.onAuthStateChanged((function(e){e?(console.log(e),W(e)):W(null)}));return function(){e()}}),[V,L]),Object(c.useEffect)((function(){u.collection("posts").onSnapshot((function(e){o(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[s]);return Object(n.jsxs)("div",{className:"app",children:[Object(n.jsx)(b.a,{open:j,onClose:function(){return m(!1)},children:Object(n.jsx)("div",{style:F,className:e.paper,children:Object(n.jsxs)("form",{className:"app__signup",children:[Object(n.jsx)("center",{children:Object(n.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""})}),Object(n.jsx)(g.a,{placeholder:"username",type:"text",value:L,onChange:function(e){return P(e.target.value)}}),Object(n.jsx)(g.a,{placeholder:"email",type:"text",value:N,onChange:function(e){return w(e.target.value)}}),Object(n.jsx)(g.a,{placeholder:"password",type:"password",value:C,onChange:function(e){return k(e.target.value)}}),Object(n.jsx)(h.a,{onClick:function(e){e.preventDefault(),p.createUserWithEmailAndPassword(N,C).then((function(e){return e.user.updateProfile({displayName:L})})).catch((function(e){return alert(e.message)})),m(!1)},children:"Sign Up"})]})})}),Object(n.jsx)(b.a,{open:E,onClose:function(){return D(!1)},children:Object(n.jsx)("div",{style:F,className:e.paper,children:Object(n.jsxs)("form",{className:"app__signup",children:[Object(n.jsx)("center",{children:Object(n.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""})}),Object(n.jsx)(g.a,{placeholder:"email",type:"text",value:N,onChange:function(e){return w(e.target.value)}}),Object(n.jsx)(g.a,{placeholder:"password",type:"password",value:C,onChange:function(e){return k(e.target.value)}}),Object(n.jsx)(h.a,{onClick:function(e){e.preventDefault(),p.signInWithEmailAndPassword(N,C).catch((function(e){return alert(e.message)})),D(!1)},children:"Sign In"})]})})}),Object(n.jsxs)("div",{className:"app__header",children:[Object(n.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""}),V?Object(n.jsx)(h.a,{onClick:function(){return p.signOut()},children:"Logout"}):Object(n.jsxs)("div",{children:[Object(n.jsx)(h.a,{onClick:function(){return m(!0)},children:"Sign Up"}),Object(n.jsx)(h.a,{onClick:function(){return D(!0)},children:"Sign In"})]})]}),Object(n.jsx)("div",{className:"app__posts",children:s.map((function(e){var t=e.id,a=e.post;return Object(n.jsx)(d,{postId:t,user:V,username:a.username,caption:a.caption,imageUrl:a.imageUrl},t)}))}),(null===V||void 0===V?void 0:V.displayName)?Object(n.jsx)(O,{username:V.displayName}):Object(n.jsx)("h3",{children:"Login to upload"})]})};a(64);o.a.render(Object(n.jsx)(v,{}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.bdf7fd4f.chunk.js.map